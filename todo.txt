# TODO
## Major
- Fix the enthalpy of reaction calculations. (Tests failing)
2 Fix the fluidized bed mass and energy flows to utilise all the
  devices.
- sensitivity analysis and error bars in plots.
- Add blast furnace with H2 injection for comparison.
  - Need to add the previous literature
  - Add BOF device to the blast furnace with H2 injection.
1 Understand the heat transfer efficiecy from the plasma to the ore.
  - how much gas do we need per kg of ore / dri?
  - break total plasma efficiency up into two numbers
  - total efficiency to the ore will be electrical-thermal efficiency + heat transfer efficiency.
- Add efficiency numbers that represent different plasma sources (transferred arc vs 
  non transferred arc etc.)
- Plasma furnace should be able to operate with a mixture of Argon and H2...
- Add scrap pre-heating to the mass energy flow.
- Need to add in Argon as an option. It may be better suited as a carrier of thermal heat
  for the high reduction degrees... Who knows.

## Moderate
- wortler2013, the source currently used for the capex of the fluidized beds,
  is actually originally for a shaft furnace. Can i find a source for the fluidized
  beds?
- Add method to the Device / System class, to throw an error if the mass or 
  energy evaluation does not balance.
- raise Exception if a dummy species is used in the mass / energy eval.
- Validate the energy required to create the thermal plasma using factsage.
  - My code becomes very inaccurate when H2 begins to dissassociate.
- Compare the thermal plasma energy requirements to blast furnace energy requirements
  - Just use published data for the initial comparison, don't need to add BF energy flow.
- When setting the mass of a Mixture, distribute the mass equally based on the existing ratio 
  the species? Does it make sense to do this, or create nefarious bugs?
- Add the ore type and other important system_vars to the sim report...
- Need to be very clear about the difference between levelised capital cost and direct capex.
- add_plasma_flows_final: Need to calculate the reaction enthalpy from monotomic H reduction. The fraction of H reduction will depend on temp
- Add heat transfer efficiency to the plasma smelter and to the EAF.
  - This might be the main reason that my EAF system is so efficient.
  - WORK ON THIS AT THE START OF NEXT WEEK!!!

## Minor
- update the requirements.txt
- Cost for injected carbon and graphite electodes are the same, but should
  be treated differently in the operating cost section.
- The cost for MgO was taken from the cost of MgCO3
- report costs of the inputs in absolute terms.
- Move all the capex functions to the plant_costs.py file

- Reduce the amount of carbon injected in the plasma during plasma-BOF, 
  can then dynamically solve the amount of carbon needed to converge 

## Bugs
- Energy to create the thermal plasma very inaccurate above 3000K.
  - Might be another good argument to try and incorporate cantera???
- The electricity requirement for the hybrid 33 pathway is very high..
  Why is this??
  - Pehaps because it needs to circulate alot of extra H2 as a carrier of thermal 
    energy just to handle the melting. The reason this is not as prevelant in the
    higher reduction degrees is becuase the iron ore has been reduced to iron, so 
    there is less stuff to melt.
    Still need to deal with the maximum temperature that the heat exchanger can 
    safely handle.

- The incorrect enthalpies of reaction are crashing the plasma BOF pathway..
  really need to fix this!!!

- TEA will crash when using ores other than the default. Due to energy / chemical balance
  issues, etc.
  - We should be able to dynamically solve the minimum excess h2 ratio required, as well
  as the feo reudction / yield that allows the sim to run. 

## Comments
- A big assumption here is that the steel plant is always running at full capacity.
- Electricity demand for all the major pathways is very similar at the commit:
  6fbfa30fbb2e0dfafb3364f7dff1129f1a7eff92
  Seems that the main difference is that we assume all the energy from the plasma is 
  perfectly transferred to the iron bearing material, and the heat exchanger does not
  suffer from maximum temperature problems..

- Does the DRI-EAF route correctly account for the fact that the EAF route 
  cannot be continously fed? So there is some booling of the HBI before it 
  can be used in the EAF? There is a small note in hiebler2004 about this..

- should probably go for device specific system vars to avoid name clashes when
  using multiple devices with the same inputs or outputs or concepts.

- SHOULD BE USING WAY MORE CAO AND MUCH LESS MGO. expect ~8:1 in the BOF
  - ==MgO is input in as doloma, which is ~60% CaO and ~40% MgO==
  - MgO is a major cost currently and is exagerating the performance of the plasma-BOF process.

- WHy does using Argon improve the economics of the process??
  - Check the enthalpy in the delta T of the plasma smelter. of Argon vs H2
  - Would depend how efficiently the off gas temp is utilised..

- Will there be Si in the hot metal in the plasma BOF scenario given that H2 does not reduce SiO2??
  - Need to understand the slag metal reactions in the precense of H 

- TBH the whole thing needs to be rewritten to use Cantera Solutions and Quantities
  - https://cantera.org/documentation/dev/sphinx/html/cython/importing.html#cantera.Solution
  - Need to check how well these work for solids and liquid phases though...
  - Definitely, getting rid of the concept of Mixtures and Species, just going with a
  Solution object for everything would clean up alot of problems...

  - Upadhya 1984, has some energy requirements for early plasma reactors.
    - Also says for SKF, minimal energy consumption is when pre-reduction percent is ~55%.
  - heibler 2004, also has some size requirements for a hypothetical reactor. 
  - Badr chapter 8.3, in the table.. 36 * 4 = 144 MW for a 1 Mtpa plant. 
  - kumar1994, the power requirements for pilot scale plsama plants. 

- How efficient is the condensing system? If it is inefficient, the hydrogen utilisation is important.
  - Could use factsage to examine how much water is condensed out of the steam.

  the technology for the ore preheating is of great importance. if our main argument
  is that plasma is good for heating and melting the ore, then shouldn't all the heating
  be done my the plasma??

  zang2023, has some reasonable numbers for input costs, LCOP for BF-BOF etc.


Sounds like someone is doing something similar to me..
  - https://stackoverflow.com/questions/76126929/using-gekko-for-large-scale-dynamic-flowsheet-simulation-with-custom-thermodynam


- Should refactor the settings files to use xml rather than csv
- Should add the ability to enter a custom Fe and gangue %
  - Will be super useful for the sensiticity analysis. 
- Check the treatment of IOC, IOD and IOE (being goethite and liothite) are correct. 


- Need to think more deaply about including fixed operating costs in the economic model